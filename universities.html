<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Список университетов</title>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Open Sans', sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #2d3a4f;
            color: #fff;
            padding: 20px;
            text-align: center;
        }
        .container {
            padding: 20px;
        }
        .filters {
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            max-width: 600px;
            margin: 0 auto;
        }
        .filters select {
            padding: 8px;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        .university-card {
            background-color: #fff;
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .university-card h3 {
            margin: 0 0 10px;
        }
        .university-card a {
            color: #1e90ff;
            text-decoration: none;
            font-weight: bold;
        }
        .university-card p {
            margin: 5px 0;
        }
        .university-card .programs {
            font-size: 14px;
            color: #777;
        }
    </style>
</head>
<body>
    <header>
        <h1>Список университетов</h1>
    </header>

    <div class="container">
        <div class="filters">
            <div>
                <label for="city-filter">Выберите город:</label>
                <select id="city-filter">
                    <option value="">Все города</option>
                    <!-- Динамически загружаемые города -->
                </select>
            </div>
            <div>
                <label for="profession-filter">Выберите профессию:</label>
                <select id="profession-filter">
                    <option value="">Все профессии</option>
                    <!-- Динамически загружаемые профессии -->
                </select>
            </div>
        </div>

        <div id="universities-list">
            <!-- Университеты будут отображаться здесь -->
        </div>
    </div>

    <script>
        // Функция для загрузки данных из JSON
        async function loadUniversitiesData() {
            try {
                const response = await fetch('https://raw.githubusercontent.com/MikaAsk/Keleshek_site.kz/main/processed_university_data7.json');
                const universities = await response.json();

                populateFilters(universities);
                displayUniversities(universities);
            } catch (error) {
                console.error('Ошибка при загрузке данных:', error);
            }
        }

        // Заполняем фильтры городов и профессий
        function populateFilters(universities) {
            const citySelect = document.getElementById('city-filter');
            const professionSelect = document.getElementById('profession-filter');

            const cities = [...new Set(universities.map(u => u['Город']))];
            const professions = [...new Set(universities.flatMap(u => (u['Образовательные программы'] || "").split(';').map(p => p.trim())))];

            cities.forEach(city => {
                const option = document.createElement('option');
                option.value = city;
                option.textContent = city;
                citySelect.appendChild(option);
            });

            professions.forEach(profession => {
                const option = document.createElement('option');
                option.value = profession;
                option.textContent = profession;
                professionSelect.appendChild(option);
            });
        }

        // Функция для отображения университетов
        function displayUniversities(universities) {
            const cityFilter = document.getElementById('city-filter').value;
            const professionFilter = document.getElementById('profession-filter').value;

            const filteredUniversities = universities.filter(university => {
                const cityMatches = cityFilter === "" || university['Город'] === cityFilter;
                const professionMatches = professionFilter === "" || university['Образовательные программы'] && university['Образовательные программы'].split(';').some(p => p.trim() === professionFilter);
                return cityMatches && professionMatches;
            });

            const universitiesList = document.getElementById('universities-list');
            universitiesList.innerHTML = '';

            filteredUniversities.forEach(university => {
                const universityCard = document.createElement('div');
                universityCard.classList.add('university-card');
                
                const universityName = university['Название университета'];
                const universityCity = university['Город'];
                const universityDescription = university['Описание'];
                const universitySite = university['Сайт'];
                const universityPrograms = university['Образовательные программы'];

                universityCard.innerHTML = `
                    <h3><a href="${universitySite}" target="_blank">${universityName}</a></h3>
                    <p><strong>Город:</strong> ${universityCity}</p>
                    <p><strong>Описание:</strong> ${universityDescription}</p>
                    <p><strong>Образовательные программы:</strong> ${universityPrograms.split(';').join(', ')}</p>
                `;

                universitiesList.appendChild(universityCard);
            });
        }

        // Добавляем обработчики для фильтров
        document.getElementById('city-filter').addEventListener('change', () => {
            loadUniversitiesData();
        });
        document.getElementById('profession-filter').addEventListener('change', () => {
            loadUniversitiesData();
        });

        // Загружаем данные при загрузке страницы
        window.onload = loadUniversitiesData;
    </script>
</body>
</html>
